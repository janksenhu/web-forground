/** * 集成成功率 *///成功率的饼图$(function(){        $.ajax({           type: "Post",           contentType: "application/json",           url: global_url+"/job/getproductkeyjob",           data:{},           dataType: 'json',           success: function (result) {                if(result.jobname=='wrong'){                    $('#container').css('height','20px')                    $('#container').html('<div align="center">请设置关键任务</div>')                    return                }                var jsonobj = $.parseJSON(result.json)                var data = [                    [ "成功率",   Math.round((jsonobj.SUCCESS/jsonobj.ALLBUILD)*10000)/100],                    [ "失败率",   Math.round((jsonobj.FAILURE/jsonobj.ALLBUILD)*10000)/100],                    [ "Abort率",  Math.round((jsonobj.ABORTED/jsonobj.ALLBUILD)*10000)/100],                    [ "运行中",   Math.round((jsonobj.BUILDING/jsonobj.ALLBUILD)*10000)/100]                ];                drawData(result.jobname,data)           }      });})//pie chartfunction drawData(jobname,data) {    chart = new Highcharts.Chart({        chart: {            renderTo: 'container',   //指向容器            plotBackgroundColor: null,            plotBorderWidth: null,            plotShadow: null,        },        title: {            text: jobname , //标题            style: { color: '#333', fontWeight: '500', fontSize: '12px', fontFamily: 'Trebuchet'}        },        tooltip: {  //提示框            enabled: true,            formatter: function() {                return '<font style="font-size:12px;font-weight:400px">'+ this.point.name +'</font>: '+ this.y +' %';            }        },        credits: {            enabled: false   //不显示LOGO        },        plotOptions: {            pie: {  //饼图                dataLabels: {                    enabled: true, //false 不显示指示线                    color: '#000000',                    connectorColor: '#000000',                    connectorWidth:0.2,//连接线的粗细                    connectorPadding:2,//标注跟连接线末端的距离                    distance:-5,//标注跟图边界的距离                    align:'center',                    formatter: function() {                        if (this.y!=0){                            return '<font style="font-size:12px;font-weight:500px">'+ this.point.name +'</font>: '+ this.y +' %';                        }                    }                },                enableMouseTracking: true//当鼠标移动的时候有提示框            }        },        series: [{            type: 'pie',            name: 'Browser share',            data: data        }]    });}